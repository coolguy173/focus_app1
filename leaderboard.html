{% extends 'base.html' %}
{% block title %}Leaderboard â€” Focus Battle{% endblock %}

{% block content %}

<nav class="navbar">
  <div class="nav-brand">
    <span class="logo-icon">âš”</span>
    <span class="logo-text">Focus<span>Battle</span></span>
  </div>
  <div class="nav-right">
    <a href="/dashboard" class="btn btn-ghost">Dashboard</a>
    <a href="/logout"    class="btn btn-ghost">Logout</a>
  </div>
</nav>

<main class="arena">
  <div class="lb-wrap">
    <h2 class="lb-title">ğŸ† Hall of Focus</h2>
    <p class="lb-subtitle">Top 20 fighters by wins</p>

    <div class="lb-table-wrap">
      <table class="lb-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Fighter</th>
            <th>Wins</th>
            <th>Losses</th>
            <th>Streak</th>
            <th>Win Rate</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          {% set total = user.wins + user.losses %}
          {% set wr = ((user.wins / total * 100) | round(1)) if total > 0 else 0 %}
          <tr class="{% if user.username == current_user.username %}lb-me{% endif %}">
            <td class="lb-rank">
              {% if loop.index == 1 %}ğŸ¥‡
              {% elif loop.index == 2 %}ğŸ¥ˆ
              {% elif loop.index == 3 %}ğŸ¥‰
              {% else %}{{ loop.index }}{% endif %}
            </td>
            <td class="lb-name">{{ user.username }}</td>
            <td class="lb-wins">{{ user.wins }}</td>
            <td class="lb-losses">{{ user.losses }}</td>
            <td class="lb-streak">{{ user.streak }}{% if user.streak > 0 %}ğŸ”¥{% endif %}</td>
            <td class="lb-wr">{{ wr }}%</td>
          </tr>
          {% else %}
          <tr><td colspan="6" class="lb-empty">No battles yet. Be the first.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</main>
{% endblock %}
